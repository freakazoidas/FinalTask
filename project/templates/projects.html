{% extends "base.html" %} {% block content %}
<div class="container mt-5">
  <h1 class="mb-4">Projects</h1>

  {% for project in projects %}
  <div class="card mb-5">
    <div class="card-body">
      <h2 class="card-title">{{ project.project_name }}</h2>
      <p class="card-text">{{ project.project_description }}</p>
      {% if project.project_picture %}
      <img
        src="{{ url_for('static', filename='images/' + project.project_picture) }}"
        alt="{{ project.project_name }}"
        class="img-fluid mb-3"
      />
      {% endif %}
      <p class="card-text">
        <strong>Departments:</strong> {% for department in project.departments
        %} {{ department.department.department_name }} {% if not loop.last %},
        {% endif %} {% endfor %}
      </p>
    </div>
  </div>
  {% endfor %}

  <div class="card mb-5">
    <div class="card-body">
      <h2 class="card-title">Create New Project</h2>
      <form method="post" enctype="multipart/form-data">
        <div class="mb-3">
          <label for="project_name" class="form-label">Project Name:</label>
          <input
            type="text"
            class="form-control"
            name="project_name"
            required
          />
        </div>
        <div class="mb-3">
          <label for="project_description" class="form-label"
            >Project Description:</label
          >
          <textarea class="form-control" name="project_description"></textarea>
        </div>
        <div class="mb-3">
          <label for="project_picture" class="form-label"
            >Project Picture:</label
          >
          <input type="file" class="form-control" name="project_picture" />
        </div>
        <div class="mb-3">
          <label for="department_ids" class="form-label"
            >Assign Departments:</label
          >
          {% for department in departments %}
          <div class="form-check">
            <input
              class="form-check-input"
              type="checkbox"
              name="department_ids"
              value="{{ department.id }}"
              id="department-{{ department.id }}"
            />
            <label
              class="form-check-label"
              for="department-{{ department.id }}"
            >
              {{ department.department_name }}
            </label>
          </div>
          {% endfor %}
        </div>
        <div>
          <button type="submit" class="btn btn-primary">Create Project</button>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}
