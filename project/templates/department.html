{% extends 'base.html' %} {% block content %}
<div class="columns">
  <div class="column is-one-third">
    <h1 class="title">{{ department.department_name }}</h1>
    <form
      method="post"
      action="{{ url_for('departments.update_department', department_id=department.id) }}"
    >
      <div class="field">
        <label class="label">New Name</label>
        <div class="control">
          <input
            class="input"
            type="text"
            name="department_name"
            value="{{ department.department_name }}"
          />
        </div>
      </div>
      <div class="field">
        <div class="control">
          <button class="button is-primary" type="submit">Update</button>
        </div>
      </div>
      <input
        type="hidden"
        name="department_name_hidden"
        value="{{ department.department_name }}"
      />
    </form>
    <br />
    <form
      method="post"
      action="{{ url_for('departments.delete_department', department_id=department.id) }}"
      onsubmit="return confirm('Are you sure you want to delete this department?');"
    >
      <input type="hidden" name="_method" value="DELETE" />
      <button class="button is-danger" type="submit">Delete Department</button>
    </form>
  </div>
  <div class="column">
    <h2 class="subtitle">Projects in {{ department.department_name }}</h2>
    <table class="table">
      <thead>
        <tr>
          <th>Project Name</th>
          <th>Description</th>
          <th>Picture</th>
        </tr>
      </thead>
      <tbody>
        {% for project in department.projects %}
        <tr>
          <td>{{ project.project_name }}</td>
          <td>{{ project.project_description }}</td>
          {% if project.project_picture %}
          <td>
            <img
              src="{{ url_for('static', filename='images/' + project.project_picture) }}"
              height="50px"
            />
          </td>
          {% else %}
          <td></td>
          {% endif %}
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
