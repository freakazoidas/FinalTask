{% extends 'base.html' %} {% block content %}
<section class="section">
  <div class="container">
    <h1 class="title">Departments</h1>

    {% with messages = get_flashed_messages(with_categories=true) %} {% if
    messages %} {% for category, message in messages %}
    <div
      class="notification {% if category == 'error' %} is-danger {% else %} is-success {% endif %}"
    >
      <button class="delete"></button>
      {{ message }}
    </div>
    {% endfor %} {% endif %} {% endwith %}

    <form method="POST" action="{{ url_for('departments.list_departments') }}">
      <div class="field has-addons">
        <div class="control is-expanded">
          <input
            class="input"
            type="text"
            name="department_name"
            placeholder="Department Name"
          />
        </div>
        <div class="control">
          <button class="button is-primary" type="submit">
            Create Department
          </button>
        </div>
      </div>
    </form>

    <table class="table is-striped is-hoverable">
      <thead>
        <tr>
          <th>Department Name</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for department in departments %}
        <tr>
          <td>{{ department.department_name }}</td>
          <td>
            <div class="buttons">
              <a
                href="{{ url_for('departments.department', department_id=department.id) }}"
                class="button is-info is-small"
              >
                View
              </a>
              <form
                method="POST"
                action="{{ url_for('departments.delete_department', department_id=department.id) }}"
              >
                <button
                  type="submit"
                  class="button is-danger is-small delete"
                  onclick="return confirm('Are you sure you want to delete this department?')"
                >
                  Delete
                </button>
              </form>
            </div>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</section>

{% endblock %}
