{% extends 'base.html' %} {% block content %}
<div class="columns">
  <div class="column is-one-third">
    <h1 class="title">Departments</h1>
    <form method="post" action="{{ url_for('departments.list_departments') }}">
      <div class="field">
        <label class="label">New Department</label>
        <div class="control">
          <input
            class="input"
            type="text"
            name="department_name"
            placeholder="Enter department name"
          />
        </div>
      </div>
      <div class="field">
        <div class="control">
          <button class="button is-primary" type="submit">Create</button>
        </div>
      </div>
      {% with messages = get_flashed_messages() %} {% if messages %}
      <div class="notification is-danger">
        {% for message in messages %}
        <p>{{ message }}</p>
        {% endfor %}
      </div>
      {% endif %} {% endwith %}
    </form>
    <hr />
    <h2 class="subtitle">Existing Departments</h2>
    <ul>
      {% for department in departments %}
      <li>
        <form
          method="post"
          action="{{ url_for('departments.delete_department', department_id=department.id) }}"
          onsubmit="return confirm('Are you sure you want to delete this department?')"
        >
          <span>{{ department.department_name }}</span>
          <button class="button is-danger is-small" type="submit">
            Delete
          </button>
        </form>
      </li>
      {% endfor %}
    </ul>
  </div>
</div>
{% endblock %}
